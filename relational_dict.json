{
    "version": "2025-09-12",
    "description": "Esquema de equivalencias multi-proveedor. Normaliza y mapea a estados canónicos de Dropi; soporta exact, contains y fuzzy para concordancia relativa.",
    "normalize": {
      "lower": true,
      "strip": true,
      "collapse_spaces": true,
      "remove_diacritics": true
    },
    "compare": {
      "strategy": "canonical_then_compare",
      "modes": ["exact", "contains", "fuzzy"],
      "fuzzy": {
        "algo": "levenshtein_token_set",
        "threshold": 0.82,
        "ignore_chars": ["-", "_", "."],
        "ignore_words": []
      }
    },
    "fallback_state": "NOVEDAD",
    "unify": [
      { "from": "DEVOLUCION", "to": "DEVUELTO" }
    ],
    "priority_order": [
      "ENTREGADO",
      "DEVUELTO",
      "CANCELADO",
      "INDEMNIZADO",
      "REZAGO",
      "EN_REPARTO",
      "INTENTO_DE_ENTREGA",
      "EN_BODEGA_DESTINO",
      "EN_TRANSITO",
      "EN_BODEGA_TRANSPORTADORA",
      "EN_PROCESAMIENTO",
      "GUIA_GENERADA",
      "EN_AGENCIA",
      "RECLAME_EN_OFICINA",
      "REEXPEDICION",
      "REENVIO",
      "ENTREGADO_A_TRANSPORTADORA",
      "PENDIENTE",
      "RECHAZADO",
      "TELEMERCADEO",
      "SIN_NOVEDAD",
      "NOVEDAD"
    ],
    "terminal_states": [
      "ENTREGADO",
      "DEVUELTO",
      "CANCELADO",
      "INDEMNIZADO",
      "REZAGO",
      "RECLAME_EN_OFICINA"
    ],
    "reconfirm_window_days": 5,
    "canonical_states": [
      "SIN_NOVEDAD",
      "GUIA_GENERADA",
      "EN_PROCESAMIENTO",
      "EN_BODEGA_TRANSPORTADORA",
      "EN_TRANSITO",
      "EN_BODEGA_DESTINO",
      "EN_REPARTO",
      "INTENTO_DE_ENTREGA",
      "RECLAME_EN_OFICINA",
      "EN_AGENCIA",
      "ENTREGADO",
      "ENTREGADO_A_TRANSPORTADORA",
      "DEVUELTO",
      "DEVOLUCION",
      "REENVIO",
      "REEXPEDICION",
      "NOVEDAD",
      "REZAGO",
      "PENDIENTE",
      "RECHAZADO",
      "TELEMERCADEO",
      "CANCELADO",
      "INDEMNIZADO"
    ],
    "contains": [
      { "pattern": "reexped", "state": "REEXPEDICION" },
      { "pattern": "redespach", "state": "REEXPEDICION" },
      { "pattern": "re despach", "state": "REENVIO" },
      { "pattern": "re-despach", "state": "REENVIO" },
      { "pattern": "nuevo envio", "state": "REENVIO" },
      { "pattern": "nuevo envío", "state": "REENVIO" },
      { "pattern": "intento de entrega", "state": "INTENTO_DE_ENTREGA" },
      { "pattern": "en ruta de entrega", "state": "EN_REPARTO" },
      { "pattern": "salio a entrega", "state": "EN_REPARTO" },
      { "pattern": "salió a entrega", "state": "EN_REPARTO" },
      { "pattern": "en bodega", "state": "EN_BODEGA_TRANSPORTADORA" },
      { "pattern": "centro logistico destino", "state": "EN_BODEGA_DESTINO" },
      { "pattern": "centro logístico destino", "state": "EN_BODEGA_DESTINO" },
      { "pattern": "entregado", "state": "ENTREGADO" },
      { "pattern": "devuelto", "state": "DEVUELTO" },
      { "pattern": "indemniz", "state": "INDEMNIZADO" },
      { "pattern": "cancelad", "state": "CANCELADO" },
      { "pattern": "rezag", "state": "REZAGO" }
    ],
  
    "providers": {
      "Interrapidisimo": {
        "notes": "Mapa de sinónimos recibido para Interrapidisimo.",
        "synonyms": {
          "SIN_NOVEDAD": ["sin novedad", "sin novedades"],
          "GUIA_GENERADA": [
            "guia generada","guía generada","documento generado","cargue en sistema",
            "pendiente por admitir","pendiente de admision","envio pendiente por admitir","envío pendiente por admitir",
            "pendiente de recoleccion","pendiente de recolección","en espera de recoleccion","en espera de recolección",
            "alistado","alistamiento","listo para envio","listo para envío","preparado para transportadora",
            "alistado para transportadora","listo para transportadora","listo para recoleccion","listo para recolección",
            "admitido","recibido en oficina","recibimos tu envio","recibimos tu envío","envio cargado"
          ],
          "EN_PROCESAMIENTO": [
            "en procesamiento","en tramite","en trámite","procesando","clasificacion","clasificación","clasificando",
            "procesado en origen","verificacion de datos","verificación de datos","validando pago",
            "impresion de guia","impresión de guía","preparando paquete"
          ],
          "EN_BODEGA_TRANSPORTADORA": [
            "en bodega transportadora","ingreso a bodega de transportadora","ingresó a bodega de transportadora",
            "en centro logistico origen","en centro logístico origen","recibido en bodega origen",
            "en agencia origen","en centro de clasificacion origen","en centro de clasificación origen"
          ],
          "EN_TRANSITO": [
            "en transito","en tránsito","transito","tránsito","en camino","ruta","viajando a tu destino",
            "traslado entre centros","salio de centro logistico","salió de centro logístico",
            "en centro logistico de transito","en centro logístico de tránsito",
            "traslado a ciudad destino","despachado","en vuelo","en carretera","movimiento intercentros"
          ],
          "EN_BODEGA_DESTINO": [
            "en centro logistico destino","en centro logístico destino","llego al centro logistico destino",
            "llegó al centro logístico destino","en ciudad de destino","en agencia destino",
            "en centro de clasificacion destino","en centro de clasificación destino",
            "retorno a centro logistico destino","retorno a centro logístico destino","recibido en destino"
          ],
          "EN_REPARTO": [
            "en reparto","en ruta de entrega","salio a entrega","salió a entrega","en camino hacia ti",
            "mensajero en ruta","salida a distribucion","salida a distribución","courier en ruta"
          ],
          "INTENTO_DE_ENTREGA": [
            "intento de entrega","no fue posible entregar","destinatario ausente",
            "no habia quien recibiera","no había quien recibiera","direccion cerrada","dirección cerrada",
            "no se encontro direccion","no se encontró dirección","no logramos hacer la entrega",
            "ausente en domicilio","reprogramada la entrega","falta de contacto",
            "telefonos no corresponden","teléfonos no corresponden"
          ],
          "RECLAME_EN_OFICINA": [
            "reclame en oficina","reclamar en oficina","pendiente por reclamar",
            "disponible en oficina","disponible en punto de entrega"
          ],
          "EN_AGENCIA": [
            "agencia","disponible para recoger","listo para recoger","retirar en oficina",
            "ya puedes recoger tu envio","ya puedes recoger tu envío","puede reclamar su envio",
            "puede reclamar su envío","listo en agencia","en punto de entrega"
          ],
          "ENTREGADO": [
            "entregado","tu envio fue entregado","tu envío fue entregado","tú envío fue entregado","recibido",
            "entregado a porteria","entregado a portería","entregado a tercero autorizado",
            "entregado en oficina","entrega exitosa","recibido conforme","entregado a seguridad","entregado en domicilio"
          ],
          "ENTREGADO_A_TRANSPORTADORA": [
            "entregado a transportadora","entregado a la transportadora","recibido por transportadora",
            "recogido por transportadora","recogido por dropi","recolectado por transportadora",
            "recolectado por dropi","recogido en bodega"
          ],
          "DEVUELTO": [
            "devuelto","retorno a origen","retornado a origen","regresado a origen","devuelto al remitente",
            "tu envio fue devuelto","tu envío fue devuelto","en proceso de devolucion","en proceso de devolución",
            "no aceptado por destinatario","rechazado por destinatario"
          ],
          "DEVOLUCION": ["devolucion","devolución","gestion de devolucion","gestión de devolución"],
          "REENVIO": ["reenvio","reenvío","re despachado","re-despachado","nuevo envio generado","nuevo envío generado"],
          "REEXPEDICION": ["reexpedicion","reexpedición","en reexpedicion","en reexpedición","redespacho a otra ciudad","remitido a otra sede"],
          "NOVEDAD": [
            "novedad","retenido por novedad","direccion incorrecta","dirección incorrecta","direccion incompleta","dirección incompleta",
            "documentacion pendiente","documentación pendiente","pago pendiente","falta pago flete",
            "mercancia dañada","mercancía dañada","incidencia","problema en la entrega","novedad en la entrega",
            "pendiente de confirmacion de datos","pendiente de confirmación de datos","retenido por seguridad",
            "verificar direccion","verificar dirección"
          ],
          "REZAGO": ["en rezago","envio en rezago","envío en rezago","bodega de rezagos","en rezagos"],
          "PENDIENTE": ["pendiente","pendiente por gestion","pendiente por gestión"],
          "RECHAZADO": ["rechazado","no aceptado"],
          "TELEMERCADEO": ["telemercadeo","llamado de telemercadeo"],
          "CANCELADO": ["cancelado","guia anulada","guía anulada","orden cancelada","envio cancelado","envío cancelado","cancelado por cliente"],
          "INDEMNIZADO": ["indemnizado","indemnizada","proceso de indemnizacion","proceso de indemnización"]
        }
      },
  
      "Dropi": {
        "notes": "Mapa de sinónimos recibido para Dropi.",
        "synonyms": {
          "GUIA_GENERADA": [
            "guia_generada","guia generada","guía generada","preparado para transportadora","preparado_para_transportadora",
            "pendiente orden creada automaticamente","pendiente orden creada","guía generada transportadora","guia generada transportadora"
          ],
          "EN_PROCESAMIENTO": [
            "en procesamiento","en trámite","procesando","pendiente de envío","en espera de despacho"
          ],
          "EN_BODEGA_TRANSPORTADORA": [
            "en bodega transportadora","pedido ha ingresado en bodega de transportadora","ingresado en bodega transportadora"
          ],
          "EN_TRANSITO": [
            "en transito","en tránsito","transito","tránsito","ruta","camino","centro",
            "en tránsito plataforma","en tránsito (Dropi)","despachada","despachada ciudad destino"
          ],
          "EN_BODEGA_DESTINO": [
            "en bodega destino","llegó a destino e ingresa al centro logístico"
          ],
          "EN_REPARTO": [
            "en reparto","en camino hacia ti","en ruta de entrega","salió a entrega","salio a entrega",
            "en espera de ruta","espera de ruta doméstica"
          ],
          "INTENTO_DE_ENTREGA": ["intento de entrega","intento_de_entrega"],
          "ENTREGADO": [
            "entregado","tu envío fue entregado","tu envio fue entregado","recibido",
            "entregado a portería","entregado a tercero autorizado","entregada (en proceso de digitalización)","entregada digitalizada"
          ],
          "ENTREGADO_A_TRANSPORTADORA": ["entregado a transportadora"],
          "DEVUELTO": [
            "devuelto","devolucion","devolución","retorno","devuelto al remitente","retornado","regresado a origen"
          ],
          "REENVIO": ["reenvio","reenvío"],
          "REEXPEDICION": ["reexpedición","en reexpedición"],
          "EN_AGENCIA": [
            "agencia","recoger","disponible para recoger","listo para recoger","retirar en oficina",
            "ya puedes recoger tu envío","ya puedes recoger tu envio","puede reclamar su envío","puede reclamar su envio"
          ],
          "RECLAME_EN_OFICINA": ["reclame en oficina","reclamar en oficina"],
          "NOVEDAD": [
            "novedad","retenido por novedad","dirección incorrecta","direccion incorrecta","destinatario ausente",
            "documentación pendiente","incidencia","problema en la entrega","en espera de RX","espera de RX"
          ],
          "PENDIENTE": ["pendiente"],
          "TELEMERCADEO": ["telemercadeo"],
          "RECHAZADO": ["rechazado","rechazado (Dropi)"],
          "CANCELADO": ["cancelado","guía anulada","orden cancelada"],
          "INDEMNIZADO": ["indemnizada"]
        }
      },
  
      "Dropby": {
        "notes": "Espacio reservado. Al recibir la lista de Dropby, agregar en 'synonyms' y quedará automáticamente alineado.",
        "synonyms": {}
      },
  
      "Therapy": {
        "notes": "Espacio reservado. Al recibir la lista de Therapy, agregar en 'synonyms' y quedará automáticamente alineado.",
        "synonyms": {}
      }
    }
  }
  